schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: fd2bc3367dbe09ea6de7323675064083
      size: 2417
    params:
      params.yaml:
        load_data:
          dataset_csv: artifacts/downloaded_dataset.csv
    outs:
    - path: artifacts/downloaded_dataset.csv
      hash: md5
      md5: 481bb9f32f35aa611bc61cc431fbdda9
      size: 10083
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: artifacts/downloaded_dataset.csv
      hash: md5
      md5: 481bb9f32f35aa611bc61cc431fbdda9
      size: 10083
    - path: src/stages/data_split.py
      hash: md5
      md5: f5942aeec40026c4dc0bb28081d62def
      size: 2251
    params:
      params.yaml:
        split_data:
          train_proportion: 0.7
          val_proportion_wrt_test: 0.5
          random_state: 12
          train_dataset_path: artifacts/split_train_dataset.csv
          test_dataset_path: artifacts/split_test_dataset.csv
          val_dataset_path: artifacts/split_val_dataset.csv
    outs:
    - path: artifacts/split_test_dataset.csv
      hash: md5
      md5: bf537aa0107151295a9a4d7c41101de9
      size: 2088
    - path: artifacts/split_train_dataset.csv
      hash: md5
      md5: a668e914de922f0cd9cf44313ec410b6
      size: 7223
    - path: artifacts/split_val_dataset.csv
      hash: md5
      md5: 7d6c547f1b8536e4fa44417e47eaef9b
      size: 2088
  features_transform:
    cmd: python src/stages/features_transform.py --config=params.yaml
    deps:
    - path: artifacts/split_test_dataset.csv
      hash: md5
      md5: bf537aa0107151295a9a4d7c41101de9
      size: 2088
    - path: artifacts/split_train_dataset.csv
      hash: md5
      md5: a668e914de922f0cd9cf44313ec410b6
      size: 7223
    - path: artifacts/split_val_dataset.csv
      hash: md5
      md5: 7d6c547f1b8536e4fa44417e47eaef9b
      size: 2088
    - path: src/stages/features_transform.py
      hash: md5
      md5: ce4c40ace4e70bbb011e9b6195d972b3
      size: 4724
    params:
      params.yaml:
        features:
          features_train_dataset: artifacts/features_train_dataset.csv
          features_test_dataset: artifacts/features_test_dataset.csv
          features_val_dataset: artifacts/features_val_dataset.csv
    outs:
    - path: artifacts/features_test_dataset.csv
      hash: md5
      md5: ae8b2721a77a1bb53f8a53f6c463b7f2
      size: 5746
    - path: artifacts/features_train_dataset.csv
      hash: md5
      md5: e7e8c9e810942d7daf0abf66a71c91e9
      size: 25733
    - path: artifacts/features_val_dataset.csv
      hash: md5
      md5: 10991364b177a9babffc6ad1269c4fb0
      size: 5746
  train:
    cmd: python src/stages/train_model.py --config=params.yaml
    deps:
    - path: artifacts/features_test_dataset.csv
      hash: md5
      md5: ae8b2721a77a1bb53f8a53f6c463b7f2
      size: 5746
    - path: artifacts/features_train_dataset.csv
      hash: md5
      md5: e7e8c9e810942d7daf0abf66a71c91e9
      size: 25733
    - path: artifacts/features_val_dataset.csv
      hash: md5
      md5: 10991364b177a9babffc6ad1269c4fb0
      size: 5746
    - path: src/stages/train_model.py
      hash: md5
      md5: b8453ed105a12b431205504cca08c515
      size: 1619
    params:
      params.yaml:
        train:
          model_name: SGP
          algo: rf
          model_path: artifacts/model_test1.pkl
          n_estimators: 100
          max_depth: 6
          random_state: 12
    outs:
    - path: artifacts/model_test1.pkl
      hash: md5
      md5: db8e6b66b14056cbb08c587f03c8889b
      size: 735681
  evaluate:
    cmd: python src/stages/evaluate.py --config=params.yaml
    deps:
    - path: artifacts/features_test_dataset.csv
      hash: md5
      md5: ae8b2721a77a1bb53f8a53f6c463b7f2
      size: 5746
    - path: artifacts/features_train_dataset.csv
      hash: md5
      md5: e7e8c9e810942d7daf0abf66a71c91e9
      size: 25733
    - path: artifacts/features_val_dataset.csv
      hash: md5
      md5: 10991364b177a9babffc6ad1269c4fb0
      size: 5746
    - path: artifacts/model_test1.pkl
      hash: md5
      md5: db8e6b66b14056cbb08c587f03c8889b
      size: 735681
    - path: src/stages/evaluate.py
      hash: md5
      md5: 4340f3ed76ae9150494ad6dc74d8b718
      size: 2882
    params:
      params.yaml:
        evaluate:
          metrics_file: artifacts/metrics.json
          cm_file: artifacts/confusion_matrix.png
    outs:
    - path: artifacts/confusion_matrix.png
      hash: md5
      md5: fd03331972dc9ccbf5861e0f5e4544dd
      size: 21239
    - path: artifacts/metrics.json
      hash: md5
      md5: 49e0194f3ddeb689c13f9b154d92741e
      size: 86
