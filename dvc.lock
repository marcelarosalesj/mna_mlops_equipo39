schema: '2.0'
stages:
  data_load:
    cmd: python3 src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: 346fca205394e380e3693f4202248d5b
      size: 2338
    params:
      params.yaml:
        load_data:
          dataset_csv: artifacts/downloaded_dataset.csv
    outs:
    - path: artifacts/downloaded_dataset.csv
      hash: md5
      md5: 939e49db4a1d26c3906162b456075ae9
      size: 9937
  data_split:
    cmd: python3 src/stages/data_split.py --config=params.yaml
    deps:
    - path: artifacts/downloaded_dataset.csv
      hash: md5
      md5: 939e49db4a1d26c3906162b456075ae9
      size: 9937
    - path: src/stages/data_split.py
      hash: md5
      md5: e27efeb5c37b64c64e0974c10913910f
      size: 2188
    params:
      params.yaml:
        split_data:
          train_proportion: 0.7
          val_proportion_wrt_test: 0.5
          random_state: 12
          train_dataset_path: artifacts/split_train_dataset.csv
          test_dataset_path: artifacts/split_test_dataset.csv
          val_dataset_path: artifacts/split_val_dataset.csv
    outs:
    - path: artifacts/split_test_dataset.csv
      hash: md5
      md5: 54fc811767361c5cb9da4939de9e765a
      size: 2065
    - path: artifacts/split_train_dataset.csv
      hash: md5
      md5: 97eb6493105574892ab831b26ed6b3de
      size: 7121
    - path: artifacts/split_val_dataset.csv
      hash: md5
      md5: 6ee2dfd638f8bdc32e3f819a16dbc7a1
      size: 2065
  features_transform:
    cmd: python3 src/stages/features_transform.py --config=params.yaml
    deps:
    - path: artifacts/split_test_dataset.csv
      hash: md5
      md5: 54fc811767361c5cb9da4939de9e765a
      size: 2065
    - path: artifacts/split_train_dataset.csv
      hash: md5
      md5: 97eb6493105574892ab831b26ed6b3de
      size: 7121
    - path: artifacts/split_val_dataset.csv
      hash: md5
      md5: 6ee2dfd638f8bdc32e3f819a16dbc7a1
      size: 2065
    - path: src/stages/features_transform.py
      hash: md5
      md5: 3639ce4f4ddc4718946b854e82870102
      size: 4573
    params:
      params.yaml:
        features:
          features_train_dataset: artifacts/features_train_dataset.csv
          features_test_dataset: artifacts/features_test_dataset.csv
          features_val_dataset: artifacts/features_val_dataset.csv
    outs:
    - path: artifacts/features_test_dataset.csv
      hash: md5
      md5: 486b0f8d5cccfa5deeed0e72fe9e5c5c
      size: 5723
    - path: artifacts/features_train_dataset.csv
      hash: md5
      md5: 732be5404fdba953b017f81b60719c4e
      size: 25631
    - path: artifacts/features_val_dataset.csv
      hash: md5
      md5: bdaa307c8b7dfe1e917e948b7b0b30d3
      size: 5723
  train:
    cmd: python3 src/stages/train_model.py --config=params.yaml
    deps:
    - path: artifacts/features_test_dataset.csv
      hash: md5
      md5: 486b0f8d5cccfa5deeed0e72fe9e5c5c
      size: 5723
    - path: artifacts/features_train_dataset.csv
      hash: md5
      md5: 732be5404fdba953b017f81b60719c4e
      size: 25631
    - path: artifacts/features_val_dataset.csv
      hash: md5
      md5: bdaa307c8b7dfe1e917e948b7b0b30d3
      size: 5723
    - path: src/stages/train_model.py
      hash: md5
      md5: c424895cc903f687144ae3660d6d2747
      size: 1557
    params:
      params.yaml:
        train:
          model_name: SGP
          algo: rf
          model_path: artifacts/model_test1.pkl
          n_estimators: 100
          max_depth: 6
          random_state: 12
    outs:
    - path: artifacts/model_test1.pkl
      hash: md5
      md5: 4f2866bf0362edf88c8d6b45c18f49b1
      size: 736304
  evaluate:
    cmd: python3 src/stages/evaluate.py --config=params.yaml
    deps:
    - path: artifacts/features_test_dataset.csv
      hash: md5
      md5: 486b0f8d5cccfa5deeed0e72fe9e5c5c
      size: 5723
    - path: artifacts/features_train_dataset.csv
      hash: md5
      md5: 732be5404fdba953b017f81b60719c4e
      size: 25631
    - path: artifacts/features_val_dataset.csv
      hash: md5
      md5: bdaa307c8b7dfe1e917e948b7b0b30d3
      size: 5723
    - path: artifacts/model_test1.pkl
      hash: md5
      md5: 4f2866bf0362edf88c8d6b45c18f49b1
      size: 736304
    - path: src/stages/evaluate.py
      hash: md5
      md5: 1722c921a01e0efd1820d6b5587705d0
      size: 2785
    params:
      params.yaml:
        evaluate:
          metrics_file: artifacts/metrics.json
          cm_file: artifacts/confusion_matrix.png
    outs:
    - path: artifacts/confusion_matrix.png
      hash: md5
      md5: ce7a93a48d2ad8916366e8a935a5e94e
      size: 20226
    - path: artifacts/metrics.json
      hash: md5
      md5: a417f63cc55bbae9964ae773d2ffa124
      size: 86
